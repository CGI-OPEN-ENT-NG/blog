<resource-right name="update" resource="blog">
	<div class="row" style="min-height: 20px">
		<a class="button" ng-href="/blog#/new-article/[[blog._id]]" target="_blank">Ajouter un article</a>
	</div>
</resource-right>

<div ng-repeat="post in blog.posts.all" class="articles-sniplet">
	<div class="row">
		<div class="cell">
			<h2 class="upper-title">
				<span class="warning-text-badge" ng-if="post.state === 'DRAFT'"><i18n>draft</i18n></span>
				<span class="warning-text-badge" ng-if="post.state === 'SUBMITTED'"><i18n>submitted</i18n></span>
				[[post.title]]
			</h2>
			<em class="subtitle">
				<i18n>post.author</i18n> <a href="/directory/annuaire#[[post.author.userId]]">[[post.author.username]]</a> <i18n>post.date</i18n> [[formatDate(post.created.$date)]]
			</em>
		</div>
		<div class="right-magnet cell">
			<input type="button" i18n-value="edit" ng-click="post.edit = true;" />
		</div>
	</div>
	<div class="row" ng-if="post.edit">
		<div class="row">
			<html-editor ng-model="post.content"></html-editor>
		</div>
		<div class="row">
			<input type="button" class="right-magnet cell" ng-click="saveEdit(post)" />
		</div>
	</div>
	<div class="row" ng-if="!post.edit">
		<div bind-html="post.content"></div>
	</div>
</div>